<?xml version="1.0" encoding="UTF-8" ?>
<!--
Name: ApiFault-v1.0.xsd

Description: Common XML Schema for API Fault.

Copyright (c) 2012 Avocent Corporation. All rights reserved.
-->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns="http://xmlns.avocent.com/Common/Fault/ApiFault/v1.0"
            xmlns:ext="http://xmlns.avocent.com/Common/Fault/ApiFault/Extension/v1.0"
            targetNamespace="http://xmlns.avocent.com/Common/Fault/ApiFault/v1.0"
            elementFormDefault="qualified" version="1.0">
 
   <xsd:import namespace="http://xmlns.avocent.com/Common/Fault/ApiFault/Extension/v1.0"
               schemaLocation="../Extension/v1.0/ExtensionApiFault-v1.0.xsd" />  
               
    <xsd:simpleType name="FaultCodeCategory">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="Business">
                <xsd:annotation>
                    <xsd:documentation>Fault is associated with a business exception/error.</xsd:documentation>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="System">
                <xsd:annotation>
                    <xsd:documentation>Fault is associated with a system exception/error.</xsd:documentation>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>   
    
    <xsd:simpleType name="FaultSeverityLevel">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="Fatal">
              <xsd:annotation>
                <xsd:documentation>Highest severity level. Unexpected errors that occur during normal execution. Fatal exceptions or any other serious problems that require immediate attention from the System Administrator.</xsd:documentation>
              </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="Error">
              <xsd:annotation>
                <xsd:documentation>The Error level designates error events that might still allow the application to continue running. Administrator action can be delayed in this severity.</xsd:documentation>
              </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="Warning">
              <xsd:annotation>
                <xsd:documentation>The Warning level designates potentially harmful situations. Any potential problem that should be reviewed by the System Administrator.</xsd:documentation>
              </xsd:annotation>
            </xsd:enumeration>
             <xsd:enumeration value="Informational">
              <xsd:annotation>
                <xsd:documentation>The Warning level designates potentially harmful situations. Any potential problem that should be reviewed by the System Administrator.</xsd:documentation>
              </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>
              
    <xsd:element name="ApiFault" type="ApiFaultType"/>
    <xsd:complexType name="ApiFaultType">
        <xsd:sequence>
            <xsd:element name="FaultedServiceId" type="xsd:string" minOccurs="1" maxOccurs="1">
                <xsd:annotation>
                        <xsd:documentation>Identifier of the service that generated the original fault.</xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            <xsd:element name="FaultCodeCategory" type="FaultCodeCategory" minOccurs="1" maxOccurs="1">
                <xsd:annotation>
                    <xsd:documentation>Category of the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="FaultCode" type="xsd:string">
                <xsd:annotation>
                    <xsd:documentation>Specific fault code for the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Message" minOccurs="1" type="xsd:string">
                <xsd:annotation>
                    <xsd:documentation>Message of the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="FaultTime" type="xsd:dateTime">
                <xsd:annotation>
                    <xsd:documentation>Time of the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="SeverityLevel" type="FaultSeverityLevel">
                <xsd:annotation>
                    <xsd:documentation>Severity Level of the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="RequestCorrelationIds" type="RequestCorrelationIdsType"
                   minOccurs="0" maxOccurs="1">
                <xsd:annotation>
                    <xsd:documentation>Correlation Ids of the request assocaited with the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="ExceptionAttribute" type="NameValuePairType"
                   maxOccurs="unbounded" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Exception Attributes related to the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Stack" type="xsd:string" minOccurs="0"
                   maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>Stack information related to the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="Extension" type="ext:ExtensionApiFaultType"
                   minOccurs="0" maxOccurs="1">
                <xsd:annotation>
                    <xsd:documentation>Extension point for the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
          </xsd:sequence>
    </xsd:complexType>
    
    <xsd:complexType name="RequestCorrelationIdsType">
        <xsd:sequence>
            <xsd:element name="RequestId" type="xsd:string" minOccurs="0"
                   maxOccurs="1">
                    <xsd:annotation>
                        <xsd:documentation>Request Id of the request that is related to the
                             fault.</xsd:documentation>
                    </xsd:annotation>
            </xsd:element>
            <xsd:element name="SenderId" type="xsd:string" maxOccurs="1"
                   minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>Sender Id of the request that is related to the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="TransactionId" type="xsd:string" minOccurs="0"
                   maxOccurs="1">
                <xsd:annotation>
                    <xsd:documentation>Transaction Id of the request that is related to
                             the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="BusinessProcessId" type="xsd:string" minOccurs="0"
                   maxOccurs="1">
                <xsd:annotation>
                    <xsd:documentation>Business Process Id of the request that is related
                             to the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="ReferenceId" type="xsd:string" minOccurs="0"
                   maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>A set of Reference Id(s) of the request thta are
                             related to the fault.</xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    
    <xsd:complexType name="NameValuePairType">
        <xsd:sequence>
            <xsd:element name="Name" type="xsd:string"/>
            <xsd:element name="Value" type="xsd:string"/>
        </xsd:sequence>
    </xsd:complexType>
    
</xsd:schema>

